{% extends 'dj_dashboard/dj_dashboard_base.html.twig' %}

{% block title %}
	{{ parent() }}
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
{% endblock %}

{% block javascripts %}
	{{ parent() }}
{% endblock %}

{% block content %}
	<main>
		<div class="container d-flex flex-column mt-5">
			{% if is_granted('ROLE_USER') and not is_granted('ROLE_DJ') %}
				<div class="d-flex justify-content-center mt-5">
					<h1 class="mt-5">Votre candidature est en attente de confirmation.</h1>
				</div>
			{% else %}
				<section class="reservations-dj">
					<h1 class="mt-3 mb-2 ms-3">
						Mes évènements
					</h1>
					<div class="row me-2 ms-2 mb-1 d-flex flex-row w-100">
						{% for reservation in reservations %}
							<div class="col-md-12 col-lg-12 col-xl-6 mx-auto my-3 my-xl-2">
								<div class="card shadow border border-dark w-100">
									<div class="card-body p-0 d-flex flex-column ">
										<div class="row me-2 ms-2 mb-1 d-flex flex-row">
											<div class="col-md-12 col-lg-12 col-xl-6 d-flex justify-content-center align-items-center p-0 dj-title-side w-50 bg-primary">
												<h5 class="text-light mx-4 w-100 text-center">{{ reservation.company }}</h5>
											</div>
											<div class="col-md-12 col-lg-12 col-xl-6 d-flex flex-column justify-content-center w-50">
												<p class="card-text px-2">
													<i class="bi bi-caret-right-fill"></i>
													{{ reservation.dateStart|date("m/d/Y") }}</p>
												<p class="card-text px-2 ">
													<i class="bi bi-caret-right-fill"></i>
													{{ reservation.address|u.truncate(50, '...', false) }}</p>
												<a href="#" class="btn btn-outline-primary mx-2 mb-2">En savoir plus</a>
												{% if newReservation.artist is defined and newReservation.artist == app.user.artist %}
													<a href="#" class="btn btn-outline-secondary mx-2 ">Annuler</a>
												{% else %}
													<a href="#" class="btn btn-outline-secondary mx-2 ">Accepter</a>
												{% endif %}
											</div>
										</div>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
					<h1 class="mt-3 mb-2 ms-3">
						Nouveaux évènements
					</h1>
					<div class="row me-2 ms-2 mb-1 d-flex flex-row w-100">
						{% for newReservation in newReservations %}
							<div class="col-md-12 col-lg-12 col-xl-6 mx-auto my-3 my-xl-2">
								<div class="card shadow border border-dark w-100">
									<div class="card-body p-0 d-flex flex-column ">
										<div class="row me-2 ms-2 mb-1 d-flex flex-row">
											<div class="col-md-12 col-lg-12 col-xl-6 d-flex justify-content-center align-items-center p-0 dj-title-side w-50 {% if newReservation.artist is defined and newReservation.artist == app.user.artist %} bg-primary {% else %} bg-secondary {% endif %}">
												<h5 class="text-light mx-4 w-100 text-center">{{ newReservation.company }}</h5>
											</div>
											<div class="col-md-12 col-lg-12 col-xl-6 d-flex flex-column justify-content-center w-50">
												<p class="card-text px-2">
													<i class="bi bi-caret-right-fill"></i>
													{{ newReservation.dateStart|date("m/d/Y") }}</p>
												<p class="card-text px-2 ">
													<i class="bi bi-caret-right-fill"></i>
													{{ newReservation.address|u.truncate(50, '...', false) }}</p>
												<a href="#" class="btn btn-outline-primary mx-2 mb-2">En savoir plus</a>
												{% if newReservation.artist is defined and newReservation.artist == app.user.artist %}
													<a href="#" class="btn btn-outline-danger mx-2">Annuler</a>
												{% else %}
													<a href="#" class="btn btn-outline-secondary mx-2 ">Accepter</a>
												{% endif %}
											</div>
										</div>
									</div>
								</div>
							</div>
						{% endfor %}
					</div>
				{% endif %}
			</div>
		</main>
	{% endblock %}
