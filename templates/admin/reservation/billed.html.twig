{% extends 'admin/admin_base.html.twig' %}

{% block javascripts %}
	{{ parent() }}
{% endblock %}

{% block title %}Réservations facturées
{% endblock %}

{% block content %}
	<main class="reservations-billed-admin container">
		<h1 class="my-5">Réservations facturées</h1>

		<table class="table table-hover">
			<thead>
				<tr>
					<th>Nom</th>
					<th>Société</th>
					<th>Début</th>
					<th>Fin</th>
					<th>Facture</th>
				</tr>
			</thead>
			<tbody>
				{% for reservation in reservations %}
					{% if date(reservation.dateEnd|date('d-m-Y')) < date("now"|date('d-m-Y')) %}
						<tr>
							<td class="align-middle">{{ reservation.eventType }}</td>
							<td class="align-middle">{{ reservation.company }}</td>
							<td class="align-middle">{{ reservation.dateEnd ? reservation.dateEnd|date('d-m-Y H:i') : '' }}</td>
							<td class="align-middle">{{ reservation.dateStart ? reservation.dateStart|date('d-m-Y H:i') : '' }}</td>
							<td class="align-middle">
								<button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
									Voir
								</button>
							</td>
							<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
								<div class="modal-dialog modal-dialog-centered modal-xl">
									<div class="modal-content w-100">
										<div class="modal-header w-100">
											<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
										</div>
										<div class="d-flex justify-content-center w-100 h-100">
											<iframe src="{{ asset('uploads/images/bill/' ~ reservation.bill) }}" class="w-100 h-100"></iframe>
										</div>
									</div>
								</div>
							</div>
						</tr>
					{% endif %}
				{% else %}
					<tr>
						<td colspan="5">Aucune réservation trouvée</td>
					</tr>
				{% endfor %}
			</tbody>
		</tbody>
	</table>
</main>{% endblock %}
